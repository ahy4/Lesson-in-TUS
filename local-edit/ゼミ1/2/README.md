# 安定マッチング問題

n人の男性の集合

$M = \{m_1, ..., m_n\}$

n人の女性の集合

$W = \{w_1, ..., w_n\}$

$M \times W = \{(m, n) | m \in M, w \in W\}$ とする

例えば、n=2のとき

$M = \{m_1, m_2\}$

$W = \{w_1, w_2\}$

$M \times W = \{(m_1, w_1), (m_1, w_2), (m_2, w_1), (m_2, w_2)\}$

マッチング：

$\{(m_1, w_1)\}, \{(m_1, w_2)\},..., \{(m_1, w_1), (m_2, w_2)\}, \{(m_1, w_2), (m_2, w_1)\}$

完全マッチング：

$\{(m_1, w_1), (m_2, w_2)\}, \{(m_1, w_2), (m_2, w_1)\}$

### 例1

- mはw'よりwが好き
- m'はwよりw'が好き
- wはmよりm'が好き
- w'はm'よりmが好き

=>

{(m, w), (m', w')} ←これが安定
{(m, w'), (m', w)} ←これが不安定要素があるため(上の例)安定ではない


### 例2

- mはw'よりwが好き
- m'はwよりw'が好き
- wはmよりm'が好き
- w'はmよりm'が好き

=>

{(m, w), (m', w')} ←wだけ不幸せな安定マッチング

{(m, w'), (m', w)}


## 安定マッチングのアルゴリズム(Gale-Shapleyのアルゴリズム)

$M = \{m_1, m_2, m_3\}$

$W = \{w_1, w_2, w_3\}$

$m_1, m_2, m_3$ の好意順：

$w_1>w_2>w_3$

$w_1, w_2, w_3$ の好意順：

$m_3>m_2>m_1$

流れ：

$(m_1, w_1)$ x

$(m_2, w_1)$ x

$(m_1, w_2)$ x

$(m_3, w_1)$

$(m_2, w_2)$

$(m_1, w_3)$

よって下3つをとったものが安定マッチング

t回までにプロポーズしたペア(m, w) (m, wはn人ずつ)

P(t)とするなら、P(t)<P(t+1)

アルゴリズム全体で、P(・)は高々$n^2$回しか増加しない
